generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum typeDay {
  MONDAY
  TUESDAY
  WEDNESDAY
  THURSDAY
  FRIDAY
  SATURDAY
  SUNDAY
}

model Admin {
  id       String @id @default(uuid())
  name     String
  email    String @unique
  password String
}

model Property {
  id           String      @id @default(uuid())
  name         String
  images       Image[]
  videos       Video[]
  surcharge    Surcharge[]
  baseCapacity Int         @default(10)
  maxCapacity  Int         @default(10)
  rateRules    RateRule[]
  createdAt    DateTime    @default(now())
  details      Detail[]
}

model RateRule {
  id                 String    @id @default(uuid())
  propertyId         String
  property           Property  @relation(fields: [propertyId], references: [id])
  startDate          DateTime?
  endDate            DateTime?
  days               typeDay[]
  minGuests          Int       @default(1)
  maxGuests          Int       @default(9999)
  pricePerNightCents Int
  minNights          Int       @default(1)
}

model Surcharge {
  id              String        @id @default(uuid())
  propertyId      String
  property        Property      @relation(fields: [propertyId], references: [id])
  surchargeTypeId String
  surchargeType   SurchargeType @relation(fields: [surchargeTypeId], references: [id])
  days            typeDay[]
  startDate       DateTime?
  endDate         DateTime?
  amountCents     Int
  appliesPerNight Boolean       @default(false)
}

model SurchargeType {
  id        String      @id @default(uuid())
  name      String
  Surcharge Surcharge[]
}

model Detail {
  id          String   @id @default(uuid())
  description String
  propertyId  String
  property    Property @relation(fields: [propertyId], references: [id])
}

model Image {
  id         String   @id @default(uuid())
  propertyId String
  property   Property @relation(fields: [propertyId], references: [id])
  idDrive    String
}

model Video {
  id         String   @id @default(uuid())
  propertyId String
  property   Property @relation(fields: [propertyId], references: [id])
  idDrive    String
}
